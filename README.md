<p align="center">
  <img src="https://user-images.githubusercontent.com/71496296/152130484-be1f57fd-45cb-428f-9184-8d314024683b.png" />
</p>

## SnailMatic

1. Установка
2. Требования для биндера и его запуск
3. Главное окно
4. Редактор биндов
   - Гайд по созданию биндов
5. Переменные
   - Гайд по функциональным переменным
6. Выбор цели (переменные $target...$)
7. Настройки биндера
8. Шпаргалка (внутриигровой блокнот)
9. Конструктор HUD
10. Остальные функции биндера
    - Горячие клавиши интерфейса
    - Перемещение скриншотов по папкам прямо из игры
    - Создание временных переменных
    - Функциональные диалоги
    - Установка напоминаний и ввод заданного текста спустя время
    - Пауза, остановка, деактивация биндов
    - Сокращение команд, фраз, текста
    - Конвертер профилей
11. Информация для разработчиков
12. Известные ошибки и их решения

<h1>1. Установка</h1>

[Ручная установка](https://disk.yandex.ru/d/FfHdxTfRx52dJw) - .rar архив

- Все файлы из архива переместить в папку *moonloader*.
- Файл *port.luac* сконвертирует профили от ScriptPatrol для SnailMatic.
- Папка *lib* содержит все нужные для работы биндера библиотеки.

После успешного запуска биндера — создастся папка с настройками и профилями биндера по пути:

`C:\Users\user\Documents\GTA San Andreas User Files\SAMP`

<h1>2. Требования для биндера и его запуск</h2>

## Требования

Для работы биндера требуется (*установить в папку с игрой*):

> [Moonloader 0.26.5+](https://www.blast.hk/threads/13305)

и библиотеки Moonloader (*установить в `.../moonloader/lib`*):

> [mimgui](https://www.blast.hk/threads/66959/#:~:text=github.com-,%D0%A1%D0%BA%D0%B0%D1%87%D0%B0%D1%82%D1%8C%20mimgui,-%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0:%20%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D1%81%D1%82%D0%B8%D1%82%D1%8C%20%D0%BF%D0%B0%D0%BF%D0%BA%D1%83), [fa-icons](https://disk.yandex.ru/d/JlTZXDRostOp0g), [copas](https://disk.yandex.ru/d/-hnx59P2qRq-uQ), [socket](https://disk.yandex.ru/d/nJeIbYenuZQG3A)

*скачивать библиотеки отдельно не нужно, всё идет в архиве с биндером*

Биндер совместим с SA-MP 0.3.7 R1, R3, 0.3DL, CRMP и независим от SAMPFUNCS и CLEO.
Работает на лаунчерах, при условии, что на них можно устанавливать моды (в частности .lua)

## Запуск

При успешном запуске биндера ты увидишь всплывающее уведомление справа внизу экрана. Открыть биндер — `CTRL+Z` или по команде `/sm.open`.

![image](https://user-images.githubusercontent.com/71496296/152141257-71d2358e-3aaf-4633-ad66-3ab832b5a2b1.png)
<p align="center">
  <em>Уведомление об успешном запуске</em>
</p>

В случае, если биндер не запустился/не работает — убедись, что SnailMatic был установлен правильно, а так же в твоей сборке не присутствует антистиллер от DarkP1xel (*!0AntiStealerByDarkP1xel32.ASI*).

Так же некоторые ошибки и их решения описаны здесь:
> 12. Известные ошибки и их решения

В ином случае обратись в [тех. поддержку](https://vk.me/scriptpatrol), приложив в сообщении файл ***moonloader.log*** ( *`\GTA San Andreas\moonloader\moonloader.log`* )

<h1>3. Главное окно</h1>

![image](https://user-images.githubusercontent.com/71496296/152163956-392f3470-7df2-4c41-ac9d-6457dcf52dc8.png)

В главном окне происходит взаимодействие с биндами (не редактирование). Отсюда же можно выйти в меню к настройкам и другим функциям.

## Взаимодействие с биндами

### Панель инструментов

<img src="https://user-images.githubusercontent.com/71496296/152145836-7823ccbb-6ba2-4bbe-8419-ed04947858f0.png" width="700">

Кнопки (слева направо):

<pre><code><b>Добавить бинд</b>, CTRL+N
<b>Редактировать бинд</b>, CTRL+O/Enter
<b>Дублировать бинд</b>
<b>Удалить бинд</b>, Delete
<b>Добавить/убрать бинд из селектора</b>, CTRL+G
<b>Открыть окно отправки отдельных строк бинда</b>
<b>Запустить/остановить бинд</b>
<b>Переместить бинд назад</b>, CTRL+Стрелочки/Drag&Drop
<b>Переместить бинд вперёд</b>, CTRL+Стрелочки/Drag&Drop
<b>Выключить/включить бинд</b>, ПКМ по бинду
<b>Свернуть панель инструментов</b></code></pre>

### Быстрые действия

Помимо взаимодействия с биндами через панель инструментов - в интерфейсе существуют быстрые действия: горячие клавиши, Drag&Drop и панель быстрого доступа по наведению на бинд:

![gif](https://media.giphy.com/media/TRtH6Lfc628NSSEf9I/giphy.gif)

Несколько полезных функций:

<pre><code><b>ПКМ по бинду</b> - выключить бинд <em>(бинд не сможет активироваться никаким способом)</em>
<b>СКМ по бинду</b> - показать некоторую информацию о бинде
<b>Кнопка "Добавить бинд"</b> - При перемещении бинда на эту кнопку - бинд дублируется
<b>Кнопка "Добавить бинд"</b> - Если поле поиска не пустое - создается бинд с введенным названием
<b>ПКМ по папке</b> - открыть настройки папки
<b>Перенос папки с помощью Drag&Drop на бинд</b> - бинд переместится в эту папку
<b>ESC</b> - закрыть окно биндера
<b>CTRL+N и сразу же CTRL+Enter</b> - создать новый бинд и сразу открыть его</code></pre>

<h1>4. Редактор биндов</h1>

> [Подробный гайд по созданию биндов](https://vk.com/@scriptpatrol-gaid-po-sozdaniu-bindov)

Что такое бинд? — это набор команд (указаний) для биндера, которые он должен выполнить в определенной последовательности и с определенной задержкой, например, отправить текст на сервер, очистить чат, запустить другой бинд и т.д.

![image](https://user-images.githubusercontent.com/71496296/152163817-c67548ac-6310-4bb4-949f-3699f5bdfd8f.png)

Редактор биндов визуально разделен на две секции: верхнюю и нижнюю

### Верхняя секция

![image](https://user-images.githubusercontent.com/71496296/152165221-13865c9c-a14f-49af-aadc-ee2601cf9aa9.png)

Верхняя подразумевает под собой все функции и пункты до секции «Сообщение, Задержка, Отправка».

<pre><code><b>«Название»</b> — название бинда
<b>«Условия»</b> — установка условий активации бинда
<b>«Три иконки»</b> — выбор варианта отображения нижней секции: «Построчно», «В виде блокнота».

<b>«Клавиша»</b> — активация бинда по клавише/сочетанию клавиш. Биндер очень чувствителен к сочетанию клавиш, поэтому CTRL+ALT+Z и ALT+CTRL+Z могут активировать разные бинды. Так же активация по клавише ставит и убирает бинд с паузы.
<b>«Активация по тексту в чате»</b> — активация бинда по появлению указанного текста в чате. При использовании регулярных выражений (например, как на скрине «<b>[Гг]</b>олова») следует включить <a href="https://www.blast.hk/threads/62661/">Lua Pattern</a> (галочка ниже). В ином случае эту галочку нужно держать выключенной.
<b>«Команда»</b> — активация бинда по введению команды. В начале команды ставить слэши и другие знаки необязательно.

<b>«Требовать подтверждение активации»</b> — при попытке активации по тексту в чате будет всплывать уведомление о подтверждении активации.
<b>«Включить Lua Pattern»</b> — позволяет использовать регулярные выражения в активации по тексту в чате. При отсутствии регулярных выражений следует держать Lua Pattern выключенным.
<b>«Блокировать клавишу бинда»</b> — блокирует клавишу активации бинда, не давая управлению игры реагировать и обрабатывать её.</code></pre>

### Нижняя секция

![image](https://user-images.githubusercontent.com/71496296/152166670-3f93449e-7986-4684-aa7e-076c781ad623.png)

Нижняя в свою очередь после «Сообщение, Задержка, Отправка»

<pre><code><b>«Сообщение»</b> — строка, в которой будет содержаться текст или функции, отправляемые биндом. Каждая строка в бинде это одна команда(указание) для биндера. Все строки выполняются в последовательности сверху вниз.
<b>«Задержка»</b> — задержка перед отправкой следующей строки, указывается в миллисекундах. 1000 мсек = 1 сек.
<b>«Отправка»</b> — метод отправки строки (список ниже)</code></pre>

### Методы отправки строки:

![image](https://user-images.githubusercontent.com/71496296/152166858-b90fb014-ddad-4efd-84c7-901de5dae544.png)

<details>
  <summary markdown="span">Отправить серверу</summary>
Отправляет строку напрямую на сервер. Отправленный текст не будет виден для вашего клиента, а значит, что сторонние скрипты и плагины его не увидят (например, если была отправлена на сервер команда, которая активирует какой-то скрипт на вашем клиенте — ничего не произойдет, т.к клиент эту команду не увидит и не обработает). Так же данная отправка не использует чат клиента(F6) и не будет мешать при наборе текста.
</details>

<details>
  <summary markdown="span">Отправить клиенту SA-MP</summary>
Отправляет строку на обработку клиенту SA-MP. Если «Отправить серверу» отправляет текст непосредственно напрямую на сервер, то обработка клиентом SA-MP сначала убедится, что текст или команда не присутствует на вашем клиенте (например команда скрипта или плагина), а уже потом отправит эту строку на сервер. В случае, если на клиенте присутствует отправленная биндером команда — она не отправится на сервер, а выполнит свою функцию, если это команда стороннего скрипта. Отправленное сообщение остается в памяти клиента и использует для этого чат(F6)
</details>

<details>
  <summary markdown="span">Написать в чат и закрыть его</summary>
Отправляет текст из строки в инпутбокс чата(F6) и сразу же его закрывает. При открытии чата там будет заготовленный текст из строки.
</details>

<details>
  <summary markdown="span">Написать в чат</summary>
Тоже самое, что и предыдущий вариант, но чат не будет закрываться.
</details>
  
<details>
  <summary markdown="span">В локальный чат</summary>
Отправляет строку в чат, который видишь только ты.
</details>
  
<details>
  <summary markdown="span">В активное диалоговое окно</summary>
Вписывает текст из строки в диалоговое окно, если такое открыто.
</details>

<details>
  <summary markdown="span">Скопировать в буфер обмена</summary>
Копирует текст из строки, как CTRL+C.
</details>
  
<details>
  <summary markdown="span">В консоль SF и биндера</summary>
Отправляет строку в консоль SAMPFUNCS (~) и консоль биндера (CTRL+~). При отсутствии SAMPFUNCS текст отправляется только в консоль биндера.
</details>

<details>
  <summary markdown="span">В уведомления</summary>
Отправляет текст в виде уведомления биндера.
</details>
  
<details>
  <summary markdown="span">Без отправки</summary>
Способ отправки строки, при которой строка не отправится, но её обработает биндер и выполнит функции, содержащиеся в этой строке (биндер обрабатывает все отправки). Эта отправка полезна, если в строке не содержится текст.
</details>

<h1>5. Переменные</h1>

> [Полная инструкция по функциональным переменным](https://vk.com/@scriptpatrol-gaid-po-funkcionalnym-peremennym-v-snailmatic)

- Переменная (в SnailMatic) — маленький внутренний скрипт, который возвращает определенную функцию, текст.
- В стандартном наборе SnailMatic находится около 80-ти переменных.
- Система переменных в SnailMatic модульная. Каждый пользователь может добавить/создать/скачать себе в биндер новую переменную.
- В SnailMatic переменные двух типов: **обычные** и **функциональные**
  - **Обычные** (*$var$*): не принимают параметры, а работают по четко-заданному алгоритму.
    - Например, переменная $time$ - вернет время в формате HH:MM:SS (20:51:42)

  - **Функциональные** (*@var(...)@*): работают по параметрам, задаваемыми самим пользователем, от которых зависит конечный результат переменных.
    - Параметрами в функциональных переменных выступают выражения, условия, порядковые номера, другие переменные из биндера.
    - Например, переменная @nickrp($targetid$)@ - вернет RP ник выбранного игрока по его ID (Vyacheslav_Kolotushkin -> Vyacheslav Kolotushkin)

![image](https://user-images.githubusercontent.com/71496296/152356769-d8b49af3-6be4-4f84-96c8-06a0fa68bdb0.png)

Переменные от **ScriptPatrol Lua**, которые установлены в `moonloader/SP/variables/` в большинстве своем поддерживаются и **SnailMatic**, для этого переместите их в `Documents\GTA San Andreas User Files\SAMP\SnailMatic\variables`

<h1>6. Выбор цели (переменные $target…$)</h1>

В биндере присутствует возможность взаимодействовать с определенным игроком через специальные переменные:

Для использования этих переменных нужно выбрать одну определенную цель (игрока), с которой нужно взаимодействовать (будь-то автовставка nick, ID цели или получение информации об этом игроке).

<pre><code><b>$targetcar$</b> - машина выбранного игрока
<b>$targetcolor$</b> - цвет ника выбранного игрока {RRGGBB}
<b>$targetid$</b> - ид выбранного игрока
<b>$targetname$</b> - имя выбранного игрока
<b>$targetsurname$</b> - фамилия выбранного игрока
<b>$targetnick$</b> - полный ник выбранного игрока</code></pre>

**В SnailMatic существует несколько различных способов выбора цели:**

## На расстоянии

Выбор цели при такой ситуации осуществляется с помощью сочетания клавиш и ввода ID'а как чит-код.

Для начала нужно нажать на определенное сочетание клавиш (по умолчанию `CTRL+P`).

*Меню биндера > Настройки*

![image](https://user-images.githubusercontent.com/71496296/152357350-c4bd85d5-8dff-414c-8bf9-1951fc09a394.png)

После нажатия этого комбо клавиш в левой части экрана появится подсказка, какой ID сейчас вводится и будет выбран.

![image](https://user-images.githubusercontent.com/71496296/152357423-7c63a139-18e9-4cd0-9df2-2279d3fc76f6.png)

Далее при помощи **цифр над QWERTY** нужно ввести как чит-код ID нужного игрока и затем нажать на `Enter/NumEnter`

После ввода ID и нажатия Enter биндер захватит цель (игрока) и переменные $target…$ заработают.

![gif](https://media.giphy.com/media/eZpnJwdJhKDXEdFWN5/giphy.gif)

## С помощью нацеливания(`ПКМ`) на игрока

Для выбора цели таким способом нужно подойти к игроку и зажать `ПКМ`, чтобы над игроком появился зеленый треугольник. Дальше нужно нажать на клавишу выбора цели через `ПКМ` (по умолчанию `Е`)

![image](https://user-images.githubusercontent.com/71496296/152357698-d55a0d18-b361-4a19-80a3-16f4794687c0.png)

Либо, если включена галочка «**Без клавиши**» хватит лишь нажать `ПКМ` по игроку и биндер выберет его как цель.

![image](https://user-images.githubusercontent.com/71496296/152357732-0959ded2-8b9a-421e-9929-65fe118ea105.png)

![gif](https://media.giphy.com/media/2hvPcnMFECWLSJ2tMf/giphy.gif)

## С помощью команды в чат

<pre><code><b>/sm.target</b> [id/nick] - выбрать цель</code></pre>

## С помощью переменной

<pre><code>@targetset(id/nick)@</code></pre>

`@targetset($closestidtocenter$)@`:

![video](https://vk.com/video-142775990_456239033)
