<p align="center">
  <img src="https://user-images.githubusercontent.com/71496296/152130484-be1f57fd-45cb-428f-9184-8d314024683b.png" />
</p>

## SnailMatic

1. [Установка и требования биндера](#1-установка-и-требования-для-биндера)
2. [Запуск](#2-запуск)
3. [Главное окно](#3-главное-окно)
4. [Редактор биндов](#4-редактор-биндов)
   - [Гайд по созданию биндов](https://github.com/GrezeeBal/SnailMaticDocs/blob/main/BINDS_CREATING_GUIDE.md)
5. [Переменные](#5-переменные)
   - [Гайд по функциональным переменным](https://github.com/GrezeeBal/SnailMaticDocs/blob/main/FUNCTIONAL_VARIABLES_GUIDE.md)
   - [Сборник дополнительных переменных, которых нет в стандартном наборе](https://github.com/GrezeeBal/SnailMaticDocs/blob/main/ADDITIONAL_VARIABLES.md)
6. [Выбор цели (переменные $target...)](#6-выбор-цели-переменные-target)
7. [Настройки биндера](#7-настройки-биндера)
8. [Шпаргалка (внутриигровой блокнот)](#8-шпаргалка-внутриигровой-блокнот)
9. [Конструктор HUD](#9-конструктор-hud)
    - [Гайд по созданию виджетов](#гайд-по-созданию-виджетов)
11. [Остальные функции биндера](#10-остальные-функции-биндера)
    - [Горячие клавиши интерфейса](#101-горячие-клавиши)
    - [Перемещение скриншотов по папкам прямо из игры](#102-перемещение-скриншотов-по-папкам-из-игры)
    - [Создание временных переменных](#103-создание-временных-переменных)
    - [Функциональные диалоги](#104-функциональные-диалогиотправка-строк-бинда-по-отдельности)
    - [Установка напоминаний и ввод заданного текста спустя время](#105-установка-напоминаний-и-ввод-заданного-текста-спустя-время)
    - [Пауза, остановка, деактивация биндов](#106-пауза-остановка-и-деактивация-биндов)
    - [Сокращение команд, фраз, текста](#107-сокращение-команд-фраз-текста)
    - [Конвертер профилей](#108-конвертер-профилей-из-других-биндеров)
    - [Кастомизация биндера](#109-кастомизация-биндера)
12. [Информация для разработчиков, SnailMatic API](#11-информация-для-разработчиков-snailmatic-api)
13. [Известные ошибки и их решения](#12-известные-ошибки-и-их-решения)

</br>



<!-- ....................................................................УСТАНОВКА.................................................................... -->
# 1. Установка и требования для биндера

### Ручная установка — .rar архив

[Google Drive](https://drive.google.com/file/d/1OiasRtkKGK2_-Zm7DhIQ3CRCckfhYlVc/view) | [Yandex.Disk](https://disk.yandex.ru/d/FfHdxTfRx52dJw)

- Все файлы и папки переместить в папку **moonloader**.
- Файл **port.luac** сконвертирует профили от ScriptPatrol для SnailMatic. После конвертации он **самоудалится**
- Папка **lib** содержит все нужные для работы биндера библиотеки.

После успешного запуска биндера — создастся папка с **настройками** и **профилями** биндера по пути:

> _C:\Users\user\Documents\GTA San Andreas User Files\SAMP\SnailMatic_

### Требования

Для работы биндера требуется (*установить в папку с игрой*):

> [Moonloader 0.26.5+](https://www.blast.hk/threads/13305)

и библиотеки Moonloader (_установить в **.../moonloader/lib**_):

> [mimgui](https://github.com/THE-FYP/mimgui/releases/download/v1.7.0/mimgui-v1.7.0.zip), [copas](https://github.com/GrezeeBal/SnailMaticDocs/files/12136140/copas.zip), [fa-icons](https://github.com/GrezeeBal/SnailMaticDocs/files/12136141/fa-icons.zip), [socket](https://github.com/GrezeeBal/SnailMaticDocs/files/12136142/socket.zip)

- Cкачивать библиотеки отдельно не нужно, всё идет в архиве с биндером (см. [Ручная установка](#ручная-установка--rar-архив))
- Биндер совместим с SA-MP 0.3.7 R1, R3, R4-2, 0.3DL, CRMP и независим от SAMPFUNCS и CLEO.
- Работает на лаунчерах, при условии, что на них можно устанавливать моды (в частности .lua)

</br>



<!-- ....................................................................ЗАПУСК.................................................................... -->
# 2. Запуск

> Если биндер успешно загрузился - ты увидишь всплывающее уведомление справа внизу экрана:

### Открыть биндер — `CTRL+Z` или по команде `/sm.open`.
<img src="https://user-images.githubusercontent.com/71496296/153750631-4dc07872-d339-4c29-985e-45d2f9c3775b.png" width="700">

В случае, если биндер не запустился/не работает — установи все библиотеки по ссылкам выше (см. [Требования](#требования)). 

Для подробной информации об ошибках - открой текстовый документ *...\moonloader\moonloader.log* и в строчке `(error) SnailMatic:` - прочитай ошибку.

Некоторые ошибки и их решения описаны здесь:
> 12. [Известные ошибки и их решения](#12-известные-ошибки-и-их-решения)

</br>



<!-- ....................................................................ГЛАВНОЕ ОКНО.................................................................... -->
# 3. Главное окно

![image](https://user-images.githubusercontent.com/71496296/152163956-392f3470-7df2-4c41-ac9d-6457dcf52dc8.png)

В главном окне происходит взаимодействие с биндами (не редактирование). Отсюда же можно выйти в меню к настройкам и другим функциям.

## Взаимодействие с биндами

### Панель инструментов

<img src="https://user-images.githubusercontent.com/71496296/152145836-7823ccbb-6ba2-4bbe-8419-ed04947858f0.png" width="700">

Кнопки (слева направо):

<pre><code><b>Добавить бинд</b>, CTRL+N
<b>Редактировать бинд</b>, CTRL+O/Enter
<b>Дублировать бинд</b>
<b>Удалить бинд</b>, Delete
<b>Добавить/убрать бинд из селектора</b>, CTRL+G
<b>Открыть окно отправки отдельных строк бинда</b>, /sm.select
<b>Запустить/остановить бинд</b>, /sm.bindstart, /sm.bindstop
<b>Переместить бинд назад</b>, CTRL+Стрелочки/Drag&Drop
<b>Переместить бинд вперёд</b>, CTRL+Стрелочки/Drag&Drop
<b>Выключить/включить бинд</b>, ПКМ по бинду
<b>Свернуть панель инструментов</b></code></pre>

### Быстрые действия

Помимо взаимодействия с биндами через панель инструментов - в интерфейсе существуют быстрые действия: горячие клавиши, Drag&Drop и панель быстрого доступа по наведению на бинд:

![gif](https://media.giphy.com/media/TRtH6Lfc628NSSEf9I/giphy.gif)

Несколько полезных функций:

<pre><code>
<b>ПКМ по бинду</b> - выключить бинд <em>(бинд не сможет активироваться никаким способом)</em>
<b>СКМ по бинду</b> - показать некоторую информацию о бинде
<b>Кнопка "Добавить бинд"</b> - При перемещении бинда на эту кнопку - бинд дублируется
<b>Кнопка "Добавить бинд"</b> - Если поле поиска не пустое - создается бинд с введенным названием
<b>ПКМ по папке</b> - открыть настройки папки
<b>Перенос папки с помощью Drag&Drop на бинд</b> - бинд переместится в эту папку
<b>ESC</b> - закрыть окно биндера
<b>CTRL+N и сразу же CTRL+Enter</b> - создать новый бинд и сразу открыть его
</code></pre>

> 10.1. [Горячие клавиши интерфейса](#101-горячие-клавиши)
> 
> 10.9. [Кастомизация биндера](#109-кастомизация-биндера)

</br>



<!-- ....................................................................РЕДАКТОР БИНДОВ.................................................................... -->
# 4. Редактор биндов

> [Подробный гайд по созданию биндов](https://github.com/GrezeeBal/SnailMaticDocs/blob/main/BINDS_CREATING_GUIDE.md)

Что такое бинд? — это набор команд (указаний) для биндера, которые он должен выполнить в определенной последовательности и с определенной задержкой, например, отправить текст на сервер, очистить чат, запустить другой бинд и т.д.

![image](https://user-images.githubusercontent.com/71496296/152163817-c67548ac-6310-4bb4-949f-3699f5bdfd8f.png)

## Редактор биндов визуально разделен на две секции: верхнюю и нижнюю

### Верхняя секция

![image](https://user-images.githubusercontent.com/71496296/152165221-13865c9c-a14f-49af-aadc-ee2601cf9aa9.png)

Верхняя подразумевает под собой все функции и пункты до секции «Сообщение, Задержка, Отправка».

*«Название»*

> название бинда

*«Условия»*

> установка условий активации бинда, при которых бинд не сможет запускаться при попытке его активации.

*«Три иконки»*

> выбор варианта отображения нижней секции: «Построчно», «В виде блокнота».

</br>

*«Клавиша»*

> активация бинда по клавише/сочетанию клавиш. Биндер очень чувствителен к сочетанию клавиш, поэтому CTRL+ALT+Z и ALT+CTRL+Z могут активировать разные бинды. Так же активация по клавише ставит и убирает бинд с паузы.
>
> Для клавиш и комбинаций так же можно использовать все клавиши мыши: как боковые, так и ЛКМ, ПКМ и СКМ.

*«Активация по тексту в чате»*

> активация бинда по появлению указанного текста в чате. При использовании регулярных выражений (например, как на скрине «<b>[Гг]</b>олова») следует включить <a href="https://www.blast.hk/threads/62661/">Lua Pattern</a> (галочка ниже). В ином случае эту галочку нужно держать выключенной. Так же в ней можно использовать переменные из биндера.

*«Команда»*

> активация бинда по введению команды. В начале команды ставить слэши и другие знаки необязательно.

</br>

*«Требовать подтверждение активации»*

> при попытке активации по тексту в чате будет всплывать уведомление о подтверждении активации.

*«Включить Lua Pattern»*

> позволяет использовать регулярные выражения в активации по тексту в чате. При отсутствии регулярных выражений следует держать Lua Pattern выключенным.

*«Блокировать клавишу бинда»*

>блокирует клавишу активации бинда, не давая управлению игры реагировать и обрабатывать её. К примеру, если бинд активируется на клавишу **F**, и галочка при этом включена - твой персонаж не будет садиться в машину на эту клавишу.

</br>

### Нижняя секция

![image](https://user-images.githubusercontent.com/71496296/152166670-3f93449e-7986-4684-aa7e-076c781ad623.png)

Нижняя в свою очередь после «Сообщение, Задержка, Отправка»

*«Сообщение»*

> строка, в которой будет содержаться текст или функции, отправляемые биндом. Каждая строка в бинде это одна команда(указание) для биндера. Все строки выполняются в последовательности сверху вниз.

*«Задержка»*

> задержка перед отправкой следующей строки, указывается в миллисекундах. 1000 мсек = 1 сек.

*«Отправка»*

> метод отправки строки (список ниже)

### Методы отправки строки:

![image](https://user-images.githubusercontent.com/71496296/152166858-b90fb014-ddad-4efd-84c7-901de5dae544.png)

<details>
  <summary markdown="span">Отправить серверу</summary>
  
* Отправляет строку напрямую на сервер. С этой отправкой команды других скриптов работать не будут. Эта отправка не использует инпутбокс чата (F6) и не будет мешать при наборе текста.

</details>

<details>
  <summary markdown="span">Отправить клиенту SA-MP</summary>
  
* Отправляет строку на обработку клиенту SA-MP. С этой отправкой будут работать команды других скриптов и самого клиента. Эта отправка непосредственно использует инпутбокс чата (F6).

</details>

<details>
  <summary markdown="span">Написать в чат и закрыть его</summary>
  
* Отправляет текст из строки в инпутбокс чата(F6) и сразу же его закрывает. При открытии чата там будет заготовленный текст из строки.

</details>

<details>
  <summary markdown="span">Написать в чат</summary>
  
* Пишет текст из строки в инпутбокс чата(F6), но не отправляет его

</details>
  
<details>
  <summary markdown="span">В локальный чат</summary>
  
* Отправляет строку в чат, который видишь только ты.

</details>
  
<details>
  <summary markdown="span">В активное диалоговое окно</summary>
  
* Вписывает текст из строки в диалоговое окно, если такое открыто.

</details>

<details>
  <summary markdown="span">Скопировать в буфер обмена</summary>
  
* Копирует текст из строки, как CTRL+C.

</details>
  
<details>
  <summary markdown="span">В консоль SF и биндера</summary>
  
* Отправляет строку в консоль SAMPFUNCS (\~) и консоль биндера (CTRL+\~). При отсутствии SAMPFUNCS текст отправляется только в консоль биндера.

</details>

<details>
  <summary markdown="span">В уведомления</summary>
  
* Отправляет текст в виде уведомления биндера.

</details>
  
<details>
  <summary markdown="span">Без отправки</summary>
  
* Способ отправки строки, при которой строка не отправится, но её обработает биндер и выполнит функции, содержащиеся в этой строке (биндер обрабатывает все отправки). Эта отправка полезна, если в строке не содержится текст.

</details>

</br>



<!-- ....................................................................ПЕРЕМЕННЫЕ.................................................................... -->
# 5. Переменные

> [Полная инструкция по функциональным переменным](https://github.com/GrezeeBal/SnailMaticDocs/blob/main/FUNCTIONAL_VARIABLES_GUIDE.md)

> [Сборник дополнительных переменных, которых нет в стандартном наборе](https://github.com/GrezeeBal/SnailMaticDocs/blob/main/ADDITIONAL_VARIABLES.md)

Чтобы автоматизировать свою игру - в SnailMatic есть набор небольших скриптов (переменных), которые выполняют различные функции. Их можно вставлять в свои бинды и они сами будут выполнять нужные действия. В SnailMatic переменные двух типов: **обычные** и **функциональные**:

- **Обычные** (`$var$`): полностью автономны, не принимают параметры, а работают по четко-заданному алгоритму.
  - Например, переменная `$time$` - вернет время в формате HH:MM:SS (`20:51:42`)
  - Или, например, переменная `$chatclear$` очистит чат

- **Функциональные** (`@var(...)@`): работают по параметрам, задаваемыми самим пользователем, от которых зависит конечный результат переменных.
  - Параметрами в функциональных переменных выступают выражения, условия, порядковые номера, другие переменные из биндера.
  - Например, переменная `@math(2+2)@` - напишет «4»
  - Или, например, переменная `@nick($closestidtocenter$)@` - напишет ник игрока, который находится ближе всего от центра экрана. В этом примере в качестве параметра использовалась обычная переменная из биндера `$closestidtocenter$`, которая пишет ID ближайшего игрока от центра экрана

![image](https://user-images.githubusercontent.com/71496296/152506274-773e7ae6-1724-4b24-a506-5c4f7888ad6f.png)

</br>



<!-- ....................................................................ВЫБОР ЦЕЛИ.................................................................... -->
# 6. Выбор цели (переменные $target…)

В биндере присутствует возможность взаимодействовать с определенным игроком через специальные переменные:

```Lua
$targetcar$ - машина выбранного игрока
$targetcolor$ - цвет ника выбранного игрока {RRGGBB}
$targetid$ - ид выбранного игрока
$targetname$ - имя выбранного игрока
$targetsurname$ - фамилия выбранного игрока
$targetnick$ - полный ник выбранного игрока
```

Для использования этих переменных нужно выбрать одну определенную цель (игрока), с которой нужно взаимодействовать (будь-то автовставка nick, ID цели или получение информации об этом игроке).

</br>

**В SnailMatic существует несколько различных способов выбора цели:**

## На расстоянии

<details><summary>Показать описание</summary>

  Выбор цели при такой ситуации осуществляется с помощью сочетания клавиш и ввода ID'а как чит-код.
  
  Для начала нужно нажать на определенное сочетание клавиш (по умолчанию `CTRL+P`).
  
  *Меню биндера > Настройки*
  
  ![image](https://user-images.githubusercontent.com/71496296/152357350-c4bd85d5-8dff-414c-8bf9-1951fc09a394.png)
  
  После нажатия этого комбо клавиш в левой части экрана появится подсказка, какой ID сейчас вводится и будет выбран.
  
  ![image](https://user-images.githubusercontent.com/71496296/152357423-7c63a139-18e9-4cd0-9df2-2279d3fc76f6.png)
  
  Далее при помощи **цифр над QWERTY** нужно ввести как чит-код ID нужного игрока и затем нажать на `Enter/NumEnter`
  
  После ввода ID и нажатия Enter биндер захватит цель (игрока) и переменные $target… заработают.
  
  ![gif](https://media.giphy.com/media/eZpnJwdJhKDXEdFWN5/giphy.gif)

</details>

</br>

## С помощью нацеливания(`ПКМ`) на игрока

<details><summary>Показать описание</summary>

  Для выбора цели таким способом нужно подойти к игроку и зажать ПКМ, чтобы над игроком появился зеленый треугольник. Дальше нужно нажать на клавишу выбора цели через ПКМ (по умолчанию `Е`)
  
  ![image](https://user-images.githubusercontent.com/71496296/152357698-d55a0d18-b361-4a19-80a3-16f4794687c0.png)
  
  Либо, если включена галочка **«Без клавиши»** хватит лишь нажать ПКМ по игроку и биндер выберет его как цель.
  
  ![image](https://user-images.githubusercontent.com/71496296/152357732-0959ded2-8b9a-421e-9929-65fe118ea105.png)
  
  ![target_rmb](https://user-images.githubusercontent.com/71496296/152429926-7ba99d64-444b-40b8-945b-9d4cba34acc0.gif)

</details>

</br>

## С помощью команды в чат

<details><summary>Показать описание</summary>

  <pre><code><b>/sm.target</b> [id/nick] - выбрать цель</code></pre>
  
  Если просто ввести команду `/sm.target` - сбросится таргет.

</details>

</br>

## С помощью переменной

<details><summary>Показать описание</summary>

<pre><code>@targetset(id/nick)@</code></pre>

  Пример `@targetset($closestidtocenter$)@`:
  
  https://user-images.githubusercontent.com/71496296/152427981-9e2a9ba2-1f29-4294-8be7-40b1ab1031fb.mp4

</details>

</br>

## С помощью предложения цели от биндера

<details><summary>Показать описание</summary>

  При нажатии на сочетание клавиш выбора цели на расстоянии (по умолчанию `CTRL+P`) биндер может предложить самого ближайшего игрока как цель. При таком способе вводить ID вообще не нужно, достаточно лишь подтвердить это предложение нажатием `Enter/NumEnter`
  
  ![target_suggestion](https://user-images.githubusercontent.com/71496296/152428998-22b0b446-c618-4915-8e78-e7fa254739b8.gif)

</details>

</br>



<!-- ....................................................................НАСТРОЙКИ.................................................................... -->
# 7. Настройки биндера

![image](https://github.com/user-attachments/assets/837e257f-7aad-4b20-831e-d57d40ddb7f6)

#### Интерфейс биндера доступен как на русском, так и на английском (English) языке

### Установка клавиш и автопрефикса

*«Открыть меню биндера»*

> открыть биндер клавишей

*«Селектор биндов»*

> открыть селектор биндов. Предварительно в него нужно добавить бинды с помощью кнопки на панели инструментов или CTRL+G.

*«Выбор цели»*

> выбор цели для переменных $target…. При нажатии этой клавиши слева экрана появится подсказка о том, какой ID введён. Вводить ID нужно с помощью цифр как чит-код и после нажать Enter, чтобы подтвердить выбор.

«Выбор цели через ПКМ»

> выбор цели для переменных $target… путём нацеливания на игрока и нажатия установленной клавиши. При включенной галочке «Без клавиши» достаточно только лишь нацелиться на игрока.

«Автопрефикс перед введенным текстом»

> текст, который всегда будет подставляться перед введенным текстом, например автоакцент. Автопрефикс не будет срабатывать на знаки ( , . / ! @ ? и т.д).

</br>

### Уведомления

*«Push-уведомления вместо уведомлений в чат»*

> заменяет все уведомления биндера в чат на всплывающие уведомления справа внизу экрана.

*«Звук при уведомлении»*

> воспроизводит звук при появлении уведомления от биндера

*«Беспалевный режим»*

> режим, при котором все уведомления биндера убираются в консоль SAMPFUNCS (\~) и консоль биндера (CTRL+\~). При отсутствии SAMPFUNCS уведомления убираются только в консоль биндера.

</br>

### Режим хукинга

С помощью этой настройки можно добиться максимальной стабильности биндера лично для твоей сборки. Если биндер крашит или нестабильно работает в рандомные моменты - измени режим хукинга на другой. Самый стабильный режим - **SAMPFUNCS** (наличие SAMPFUNCS обязательно)

*«Автономный»*

> Режим биндера, который полностью полагается на [наши самописные функции](https://www.blast.hk/threads/55743/). Он полезен тем, что только с этим режимом активация по тексту в чате будет работать как на серверный, так и на локальный чат.

*«Гибридный RakLua»*

> Режим биндера, который наполовину полагается на [наши самописные функции](https://www.blast.hk/threads/55743/) и наполовину на функции [RakLua](https://www.blast.hk/threads/69433/).

*«RakLua»*

> Режим биндера, который полностью полагается на функции [RakLua](https://www.blast.hk/threads/69433/).

*«SAMPFUNCS»*

> Режим биндера, который полностью полагается на функции SAMFUNCS (самый стабильный режим из всех, но в твоей сборке должен быть установлен сампфункс).

</br>

### Синхронизация биндера

*«Твой идентификатор»*

> твой персональный идентификатор пользователя, к которому прикрепляются твои синхронизированные файлы. Его рекомендуется сохранить на случай, если он по какой-нибудь причине изменится.

*«Синхронизировать настройки и профили»*

> загружает твои настройки и профили на хост биндера

*«Восстановить настройки последней синхронизации»*

> восстанавливает твои ранее загруженные настройки и профили с хоста биндера

</br>

### Сброс и удаление биндера

*«Сбросить настройки биндера»*

> сбрасывает настройки биндера

*«Сбросить текущий профиль»*

> удаляет все бинды в текущем профиле

*«Сбросить текущую сессию»*

> биндер сохраняет все функции, которые создаются на одну сессию игры (до закрытия игры) (на случай краша биндера). Эта кнопка будет сбрасывать эти функции. Быстро сбросить сессию CTRL+SHIFT+R
> 
> Функции которые сохраняются на одну сессию: временные переменные (/sm.regvar), напоминания (/sm.remind), выбранный игрок (таргет)

*«Удалить биндер»*

> удалить snailmatic.luac через интерфейс.

</br>

*Исполняющий файл биндера*

> \GTA San Andreas\moonloader\snailmatic.luac

*Настройки и профили биндера*

> \Documents\GTA San Andreas User Files\SAMP\SnailMatic

</br>

### Система профилей

![image](https://user-images.githubusercontent.com/71496296/152680047-a90af398-238c-4b51-b6b0-cb6672f6a329.png)

При клике на кнопку **«Добавить профиль»** добавляется профиль с указанным названием. С помощью ПКМ по созданному профилю ему можно изменить название или удалить его. 

Так же профили можно устанавливать от других пользователей. Сборник профилей [находится здесь (vk.com)](https://vk.com/topic-142775990_39480277)

Чтобы добавлять профили через проводник во время игры нужно - перезагружать биндер (`/sm.reload`). Профили находятся по адресу _Documents\GTA San Andreas User Files\SAMP\SnailMatic\profiles_

</br>

### Редактор отыгровки оружия

<img src="https://user-images.githubusercontent.com/71496296/152430269-7e5a6523-13b4-4f7f-8130-81c1fbb466dd.png" width="800">

> С помощью галочки "Автоматическая отыгровка оружия" у кнопки в настройках можно быстро включить или выключить всю систему.

*«Оружие»*

> выбор оружия для редактирования отыгровки

*«Клавиша»*

> клавиша активации отыгровки оружия. Считается как полностью ручная активация и не зависит от других способов активации отыгровки оружия

*«Задержка перед отыгровкой»*

> задержка перед тем, как биндер отыграет оружие. Ставится в миллисекундах. 1000 мсек = 1 сек

</br>

*«Автоматическая отыгровка оружия»*

> биндер будет отыгрывать доставание/убирание оружия полностью автоматически, без флуда.

*«Полу-автоматическая отыгровка оружия»*

> автоматическая отыгровка оружия при прицеливании с помощью ПКМ.

</br>




<!-- ....................................................................ШПАРГАЛКА.................................................................... -->
# 8. Шпаргалка (внутриигровой блокнот)

Удобная шпаргалка-блокнот, в которую можно записывать нужную информацию. Её можно открыть через команду `/sm.spur` и быстро копировать текст, просто нажимая на него

![image](https://user-images.githubusercontent.com/71496296/152431239-31ef21d1-070c-472e-89f8-090f8561abaf.png)

Из функций шпаргалка предлагает неограниченное создание файлов, огромный размер текста, а так же форматирование текста:

## Функции:.

![tags](https://github.com/GrezeeBal/SnailMaticDocs/assets/71496296/921195dc-c167-4781-92e0-f52a39ec0da7)

```
{RRGGBB} Text - устанавливает цвет тексту. Например, "{ff0000}Этот текст покрашен в красный"
#sameline Text - переносит текст на предыдущую строку. Например:
  "Текст слева
  #right#sameline Текст справа" - на одной строке будет два разных текста слева и справа окна
#center Text - переносит текст в центр шпаргалки
#right Text - переносит текст в правую часть шпаргалки
#font12 Text - устанавливает размер шрифта тексту в одной строке [12, 14, 16, 18, 30]
#iconCOMPASS - рисует иконку
  Названия иконок можно посмотреть в файле \GTA San Andreas\moonloader\lib\fa-icons.lua
  Сами иконки можно посмотреть на https://fontawesome.com/v4.7/icons/
#img(1.png) - картинка с названием 1.png по пути Documents\GTA San Andreas User Files\SAMP\SnailMatic\images\
#img(1.png, size(10,10)) - картинка 1.png по вышеуказанному пути с размером 10 на 10 пикселей
#img(1.png, pos(1,1)) - картинка 1.png по вышеуказанному пути на позиции x = 1 y = 1 относительно окна шпаргалки
#img(1.png, pos(1,1), size(10,10))
#img(1.png, size(10,10), pos(1,1))
#img(1.png, size(-1,-1)) - картинка 1.png по вышеуказанному пути размер которой будет зависеть от размера окна шпаргалки (по сути авторазмер картинки)
#img(weapons/1.png) - картинка 1.png по пути Documents\GTA San Andreas User Files\SAMP\SnailMatic\images\weapons\
#img(C:\Users\user\Изображения\Wallpapers\1.png) - картинка 1.png по пути C:\Users\user\Изображения\Wallpapers\
#img(https://site.com/image.png) - картинка image.png по пути https://site.com/image.png
```

## Быстрый просмотр шпаргалки

С помощью команд можно быстро открыть просмотр шпаргалки.

<pre><code><b>«/sm.note</b> [название шпаргалки] [текст]» — открыть/искать текст в указанной шпаргалке. Вписывать полное название шпаргалки необязательно.
«/> [текст]» — открыть/искать текст в активной шпаргалке.</code></pre>

<img src="https://user-images.githubusercontent.com/71496296/152432476-c92b077b-463d-4192-9a12-31b9aa380d1b.png" width="800">

В этом же окне можно скопировать строку с помощью нажатия ЛКМ на неё, переключаться между шпаргалками и найти нужный текст с помощью кнопки поиска сверху окна. Так же это окно можно масштабировать.

</br>



<!-- ....................................................................HUD(ВИДЖЕТ).................................................................... -->
# 9. Конструктор HUD

Система, которая рендерит любой текст, иконки и переменные на экран. Количество виджетов неограниченно.

![hud](https://user-images.githubusercontent.com/71496296/170084951-2e9142db-f56e-4b0b-b376-69f79d4f0bf1.gif)

*«Статус»*

> вкл/выкл виджет

*«Фон»*

> установка цвета и прозрачности фона окна. Чтобы убрать фон - нужно выкрутить прозрачность в 0

*«Закругление»*

> закругление углов окна

*«Расстояние от границ окна»*

> расстояние между текстом и границами окна по X и Y

*«Авторазмер»*

> при включенном авторазмере биндер сам будет подстраивать размер окна к тексту в реальном времени. При выключенном авторазмере размер окна можно редактировать вручную.

*Кнопка «Пресеты»*

> три готовых пресета на выбор.

В поле редактора вписывается любой текст, переменные, иконки и картинки, а биндер в реальном времени всё это рендерит и обрабатывает этот текст в указанном месте.

## Функции:.

![tags](https://github.com/GrezeeBal/SnailMaticDocs/assets/71496296/921195dc-c167-4781-92e0-f52a39ec0da7)

```
{RRGGBB} Text - устанавливает цвет тексту. Например, "{ff0000}Этот текст покрашен в красный"
#sameline Text - переносит текст на предыдущую строку. Например:
  "Текст слева
  #right#sameline Текст справа" - на одной строке будет два разных текста слева и справа окна
#center Text - переносит текст в центр виджета
#right Text - переносит текст в правую часть виджета
#font12 Text - устанавливает размер шрифта тексту в одной строке [12, 14, 16, 18, 30]
#iconCOMPASS - рисует иконку
  Названия иконок можно посмотреть в файле \GTA San Andreas\moonloader\lib\fa-icons.lua
  Сами иконки можно посмотреть на https://fontawesome.com/v4.7/icons/
#img(1.png) - картинка с названием 1.png по пути Documents\GTA San Andreas User Files\SAMP\SnailMatic\images\
#img(1.png, size(10,10)) - картинка 1.png по вышеуказанному пути с размером 10 на 10 пикселей
#img(1.png, pos(1,1)) - картинка 1.png по вышеуказанному пути на позиции x = 1 y = 1 относительно окна виджета
#img(1.png, pos(1,1), size(10,10))
#img(1.png, size(10,10), pos(1,1))
#img(1.png, size(-1,-1)) - картинка 1.png по вышеуказанному пути размер которой будет зависеть от размера окна виджета (по сути авторазмер картинки)
#img(weapons/1.png) - картинка 1.png по пути Documents\GTA San Andreas User Files\SAMP\SnailMatic\images\weapons\
#img(C:\Users\user\Изображения\Wallpapers\1.png) - картинка 1.png по пути C:\Users\user\Изображения\Wallpapers\
#img(https://site.com/image.png) - картинка image.png по пути https://site.com/image.png
```

</br>

### Гайд по созданию виджетов

В этом примере мы сделаем виджет, который будет показывать оружие в руке и игрока на которого мы смотрим, а так же он будет автоматически скрывать и показывать эту информацию при необходимости:

![hud](https://github.com/GrezeeBal/SnailMaticDocs/assets/71496296/862f7d4c-323d-4444-a5df-1df9f8c1a0f8)

Весь код выглядит так:

```
@ifandor("$myweapon$"~="Fist"?#img(weapons/$myweaponid$.png, size(75, 75), pos(80,1)):)@
#center#font18@ifandor("$myweapon$"~="Fist"?{8af7ff}$myweapon${FFFFFF} - $myweaponclip$:)@
#center#font18@ifandor("$closestidtocenter$"==""?:@nickcolor($closestidtocenter$)#iconUSER {FFFFFF}@nick($closestidtocenter$){FFFFFF}[$closestidtocenter$])@
#center#font14@ifandor("@car($closestidtocenter$)"==""?:{FFFFFF}| #iconCAR {8af7ff}@car($closestidtocenter$){FFFFFF} ... #iconWRENCH {8af7ff}@carhealth($closestidtocenter$))@
```

</br>

<details><summary>Показать гайд</summary>

  Для начала нам нужно скачать картинки оружия для нашего худа: [weapons.zip](https://github.com/GrezeeBal/SnailMaticDocs/files/12137338/weapons.zip). Папку **weapons** нужно переместить в папку **images** по пути _\Документы\GTA San Andreas User Files\SAMP\SnailMatic\images_

  Чтобы биндер начал рендерить нам картинку оружия, которое сейчас находится в руке персонажа - впишем в редактор виджета следующий тэг: `#img(weapons/$myweaponid$.png, size(75, 75))`

  ![image](https://github.com/GrezeeBal/SnailMaticDocs/assets/71496296/683a3417-ac14-408d-93f8-2f2abb3ab21d)

  Теперь добавим условие: если в руках нет никакого оружия - картинка не должна показываться. Это мы сделаем с помощью функ. переменной [@ifandor](https://github.com/GrezeeBal/SnailMaticDocs/blob/main/FUNCTIONAL_VARIABLES_GUIDE.md#ifandor): `@ifandor("$myweapon$"~="Fist"?#img(weapons/$myweaponid$.png, size(75, 75)):)@`

  Дальше добавим информацию о названии оружия и количестве патронов в обойме: `{8af7ff}$myweapon${FFFFFF} - $myweaponclip$`

  ![image](https://github.com/GrezeeBal/SnailMaticDocs/assets/71496296/0f83a60a-420f-4deb-8e72-1b0167f3de26)

  Для этой информации так же добавим аналогичное условие, если в руке нет никакого оружия - информация не показывается: `@ifandor("$myweapon$"~="Fist"?{8af7ff}$myweapon${FFFFFF} - $myweaponclip$:)@`
  
  ![image](https://github.com/GrezeeBal/SnailMaticDocs/assets/71496296/745ff018-19b9-4ca9-80b6-142264243b9a)

  Теперь добавим вывод информации об игроке, на которого мы смотрим:

  В первую строку будем выводить ник и ид игрока, а во вторую его машину, если он в ней сидит. Условия все те же - информация будет выводится только тогда, когда я смотрю на какого-либо игрока.

  ```
  @ifandor("$closestidtocenter$"==""?:@nickcolor($closestidtocenter$)#iconUSER {FFFFFF}@nick($closestidtocenter$){FFFFFF}[$closestidtocenter$])@
  @ifandor("@car($closestidtocenter$)"==""?:{FFFFFF}| #iconCAR {8af7ff}@car($closestidtocenter$){FFFFFF} ... #iconWRENCH {8af7ff}@carhealth($closestidtocenter$))@
  ```

  ![image](https://github.com/GrezeeBal/SnailMaticDocs/assets/71496296/19df75c0-635a-4284-99c1-eeea6c229e13)

  Дальше займемся кастомизацией нашего текста: добавим к тексту тэг `#center`, чтобы он рендерился по центру виджета, а не слева.

  ```
  @ifandor("$myweapon$"~="Fist"?#img(weapons/$myweaponid$.png, size(75, 75)):)@
  #center@ifandor("$myweapon$"~="Fist"?{8af7ff}$myweapon${FFFFFF} - $myweaponclip$:)@
  #center@ifandor("$closestidtocenter$"==""?:@nickcolor($closestidtocenter$)#iconUSER {FFFFFF}@nick($closestidtocenter$){FFFFFF}[$closestidtocenter$])@
  #center@ifandor("@car($closestidtocenter$)"==""?:{FFFFFF}| #iconCAR {8af7ff}@car($closestidtocenter$){FFFFFF} ... #iconWRENCH {8af7ff}@carhealth($closestidtocenter$))@
  ```

  И изменим рашмер шрифта: укажем для нашего оружия и ника игрока размер `18`, а информацию о машине размер `14` с помощью тэга `#font`

  ```
  @ifandor("$myweapon$"~="Fist"?#img(weapons/$myweaponid$.png, size(75, 75)):)@
  #font18#center@ifandor("$myweapon$"~="Fist"?{8af7ff}$myweapon${FFFFFF} - $myweaponclip$:)@
  #font18#center@ifandor("$closestidtocenter$"==""?:@nickcolor($closestidtocenter$)#iconUSER {FFFFFF}@nick($closestidtocenter$){FFFFFF}[$closestidtocenter$])@
  #font14#center@ifandor("@car($closestidtocenter$)"==""?:{FFFFFF}| #iconCAR {8af7ff}@car($closestidtocenter$){FFFFFF} ... #iconWRENCH {8af7ff}@carhealth($closestidtocenter$))@
  ```

  ![image](https://github.com/GrezeeBal/SnailMaticDocs/assets/71496296/bbf7d957-7f17-4db7-ab76-5634b00da57b)

  Небольшая проблема: картинка находится не по центру виджета. Это можно исправить с помощью аргумента тэга **#img** - `pos(x,y)`. Укажем для картинки позицию `pos(80,1)`: `#img(weapons/$myweaponid$.png, size(75, 75), pos(80,1))`

  ![image](https://github.com/GrezeeBal/SnailMaticDocs/assets/71496296/10f75e36-4a60-4a5f-a417-7181e277bb3d)

  Уберём авторазмер и отредактируем размер виджета так, чтобы всё ровно отцентрировалось: 

  ![image](https://github.com/GrezeeBal/SnailMaticDocs/assets/71496296/d6b8813c-ca15-4ff2-b3f5-a82bfd090cfe)

  И выкрутим прозрачность фона в 0, чтобы убрать его.

  ![image](https://github.com/GrezeeBal/SnailMaticDocs/assets/71496296/9c14c929-a179-41a8-9dee-9af8e29acf0b)

  
</details>
  
</br>



<!-- ....................................................................ОСТАЛЬНЫЕ ФУНКЦИИ.................................................................... -->
# 10. Остальные функции биндера

<!-- ..............................ГОРЯЧИЕ КЛАВИШИ.................................. -->
## 10.1. Горячие клавиши

Управление в интерфейсе биндера может осуществляться с помощью горячих клавиш. Посмотреть все доступные горячие клавиши можно в разделе «**Больше**» в меню биндера

![image](https://github.com/GrezeeBal/SnailMaticDocs/assets/71496296/160815b8-f501-4ca5-bfd4-cddcc04d39ce)

</br>

<!-- ..............................ПЕРЕМЕЩЕНИЕ СКРИНОВ.................................. -->
## 10.2. Перемещение скриншотов по папкам из игры

С помощью команды можно перемещать созданные скриншоты через `F8` по папкам, которые будут создаваться в папке скриншотов SA-MP

<pre><code><b>«/sm.ss</b> [папка]* [номер скрина] [новое название скрина]» — перемещение (последнего)скриншота в указанную папку с указанным именем (по умолчанию перемещается с оригинальным названием).</code></pre>

\*если нужно переместить определенный скрин — вписывать полное название необязательно, хватит лишь номера скрина.

### Например

```
/smss Вылеченные
```

— переместит последний сделанный скрин в папку «Вылеченные». Если такой папки нет — создаст её и переместит туда последний сделанный скрин.

```
/smss Патруль 098
```

— переместит скрин под номером 098 в папку «Патруль»

```
/smss Патруль 098 Патруль-1
```

— переместит скрин под номером 098 в папку «Патруль» и изменит название этого скрина на «Патруль-1»

</br>

<!-- ..............................ВРЕМЕННЫЕ ПЕРЕМЕННЫЕ.................................. -->
## 10.3. Создание временных переменных

> [Гайд по использованию этой команды (vk.com)](https://vk.com/@scriptpatrol-sozdaem-arifmeticheskuu-progressiu)

Временная переменная — переменная на одну сессию игры (до закрытия игры)

<pre><code>«/sm.regvar [название переменной]* [значение/текст]*» — установка простой переменной на одну сессию

«/sm.regvarwn [название переменной]* [значение/текст]*» — полный аналог /sm.regvar, но без уведомлений от биндера</code></pre>

Создание временных переменных полезно, если нужно записать какую-то информацию и быстро её использовать. Так же полезно для слияния двух и более переменных в одну переменную.

</br>

<!-- ..............................ДИАЛОГИ.................................. -->
## 10.4. Функциональные диалоги/отправка строк бинда по отдельности

> [Небольшой гайд по созданию функциональных диалогов](https://github.com/GrezeeBal/SnailMaticDocs/blob/main/BINDS_CREATING_GUIDE.md#9-%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D1%91%D0%BC-%D1%81%D0%B2%D0%BE%D0%B8-%D0%B4%D0%B8%D0%B0%D0%BB%D0%BE%D0%B3%D0%BE%D0%B2%D1%8B%D0%B5-%D0%BE%D0%BA%D0%BD%D0%B0)

![image](https://user-images.githubusercontent.com/71496296/152434057-5b6a4de1-74ac-4a87-a49e-e685f6dcba60.png)

С помощью данного окна можно отправлять строки бинда в любом порядке по отдельности, нажимая на них

Так же можно использовать для создания функциональных диалогов, которые будут активировать нужные бинды.

<pre><code>«/sm.select [номер бинда/имя бинда]* [папка]» — открыть окно выбора отдельных строк бинда по его номеру/названию.

Так же можно открыть через кнопку на панели инструментов в главном окне или через быструю панель при наведении на бинд.</code></pre>

</br>

<!-- ..............................НАПОМИНАНИЯ.................................. -->
## 10.5. Установка напоминаний и ввод заданного текста спустя время

<pre><code>«/sm.remind [сек/время]* (@/!)[текст]*» — отправка введенного текста на клиент SA-MP через кол-во [сек] или в назначенное [время] (HH:MM или HH:MM:SS)
Знак @ перед текстом отправит текст в уведомления биндера.
Знак ! перед текстом отправит текст в никуда, полезно для некоторых переменных ($chatclear$...)</code></pre>

С помощью данной функции можно устанавливать напоминания или дать указание биндеру ввести указанный текст спустя какое-то количество времени.

### Например

```
/sm.remind 21:22:35 @Сделать доклад
```

— биндер в `21:22:35` отправит в виде уведомления от биндера текст «Сделать доклад».


```
/smremind 600 /doklad
```

— биндер через 600 секунд (10 минут) напишет команду `/doklad`, которая, допустим, активирует бинд с докладом.


```
/smremind 20:35 /autogov
```

— биндер в `20:35` напишет команду `/autogov`, которая, допустим, активирует бинд с автоматическими подачами объявлений в `/gov`. Перед этим нужно, соответственно, создать такой бинд, вписать в него нужные сообщения и повесить на него команду активации `/autogov`


```
/smremind 1 !$chatclear$
```

— биндер через 1 секунду очистит чат, без отправления пустой строки.

> Функция `/sm.remind` устанавливается на одну сессию игры.

</br>

<!-- ..............................ПАУЗА, ОСТАНОВКА, ДЕАКТИВАЦИЯ.................................. -->
## 10.6. Пауза, остановка и деактивация биндов

### Деактивация и активация биндов

Бинды можно выключать(деактивировать), после чего они не смогут запускаться никаким способом

| Способ  | Описание |
| ------------- | ------------- |
| @binddisable(…)@  | Выключает(деактивирует) бинд через переменную, после чего он не сможет запускаться никаким способом  |
| @bindenable(…)@  | Включает деактивированный бинд через переменную, после чего он сможет запускаться  |
| ПКМ по бинду  | При нажатии ПКМ по наведенному бинду - он выключается. Таким же способом и включается  |
| Кнопки в интерфейсе  | На панели инструментов есть кнопка, включающая и выключающая бинд. (см. [Взаимодействие с биндами](#взаимодействие-с-биндами))  |

> Параметры переменных(что нужно писать в скобки переменных) смотри ниже

### Остановка и запуск биндов

| Способ  | Описание |
| ------------- | ------------- |
| По клавише/сочетанию клавиш  | Запуск бинд по клавише или сочетанию клавиш.  |
| По тексту в чате  | Автоматический запуск бинда, если в чате появится нужный текст  |
| По команде  | Запуск бинда по введению кастомной команды. Команды можно делать как со слэшами и другими знаками, так и без них. |
| /sm.bindstart  | Запустить бинд через специальную команду.  |
| /sm.bindstop  | Остановить запущенный бинд через специальную команду. Если не вводить никакие параметры - остановятся все запущенные бинды  |
| @bindstart(…)@  | Запустить бинд через переменную  |
| @bindstop(…)@  | Остановить запущенный бинд через переменную  |
| Кнопки в интерфейсе  | На панели инструментов и при наведении курсором на бинд есть кнопки запуска/остановки бинда. (см. [Взаимодействие с биндами](#взаимодействие-с-биндами))  |

> Параметры для команд и переменных смотри ниже

### Пауза запущенных биндов

| Способ  | Описание |
| ------------- | ------------- |
| Клавиша/сочетание клавиш активации  | Если бинд запущен - его можно снять/поставить на паузу клавишами активации этого же бинда.  |
| @bindpause(…)@  | Поставить запущенный бинд на паузу через переменную  |
| @bindunpause(…)@  | Снять с паузы бинд, который стоит на паузе через переменную  |
| Кнопки в интерфейсе  | На панели инструментов и при наведении курсором на бинд есть кнопки паузы бинда. (смотри ниже)  |

_Поставить на паузу/снять с паузы_

![image](https://user-images.githubusercontent.com/71496296/152435819-ea93ee9c-88f0-404f-82d0-f2a46d5197fe.png) ![image](https://user-images.githubusercontent.com/71496296/152435833-5dbeb351-9cc5-4910-8e45-d50eaf59b8ca.png)


> Параметры переменных смотри ниже

### Параметры переменных `@bind...()@` и команд `/sm.bindstop`, `/sm.bindstart`

```
@bind...($thisbind$)@     - бинд, в котором была запущена эта переменная
@bind...("10" "папка")@   - бинд строго с названием 10 и строго в папке "папка"
@bind...("10" папка)@     - бинд строго с названием 10 и в первой попавшейся папке в имени которой встречается "папка"
@bind...(имя папка)@      - первый попавшийся бинд в имени которого встречается "имя" и в первой попавшейся папке в имени которой встречается "папка"
@bind...(имя "папка")@    - первый попавшийся бинд в имени которого встречается "имя" и строго в папке "папка"
@bind...(10 папка)@       - бинд под порядковым номером 10 и в первой попавшейся папке с именем "папка"
@bind...(10 "папка")@     - бинд под порядковым номером 10 и строго в папке "папка"

* все параметры для переменных идентичны и для команд. Например @bindstart(1 "папка")@ == /smbindstart 1 "папка"
* папку можно не указывать - тогда по умолчанию переменная применяется к бинду из первой папки
* если вместо имени бинда указать звёздочку (*) - переменная применяется ко всем биндам в папке
```

</br>

<!-- ..............................СОКРАЩЕНИЕ КОМАНД, ФРАЗ, ТЕКСТА.................................. -->
## 10.7. Сокращение команд, фраз, текста

> [Несколько примеров с использованием этого функционала](https://github.com/GrezeeBal/SnailMaticDocs/blob/main/BINDS_CREATING_GUIDE.md#4-%D1%81%D0%BE%D0%BA%D1%80%D0%B0%D1%89%D0%B0%D0%B5%D0%BC-%D1%84%D1%80%D0%B0%D0%B7%D1%83)

Бинды в SnailMatic можно активировать командами, которым необязательно содержать в начале себя слэши или какие-нибудь другие знаки. Таким образом через бинды можно сокращать нужные команды, фразы и текст.

![image](https://user-images.githubusercontent.com/71496296/152436517-bc90556d-1a58-499f-910f-a2e7ff24b009.png)

*Результат*

![inside](https://user-images.githubusercontent.com/71496296/152436682-afad5472-187c-4958-8240-2724536d82ee.gif)

</br>

<!-- ..............................КОНВЕРТЕР ПРОФИЛЕЙ.................................. -->
## 10.8. Конвертер профилей из других биндеров

Чтобы быстро перейти из другого биндера на SnailMatic мы разработали свой собственный конвертор (`port.luac`), который перенесет профиль из другого биндера в SnailMatic.

Скачать [конвертор профилей](https://disk.yandex.ru/d/thgyaUe9UdFfLA) (идет вместе с архивом биндера)
Данный файл нужно переместить в папку moonloader и запустить игру. После он сам сконвертирует все поддерживаемые профили (список ниже) и самоудалится.

После конвертации файл `port.luac` сам удаляется из _moonloader_, а на конвертированный профиль нужно переключиться в настройках биндера.

```
### Для конвертации SP Lua
Профили должны находиться по пути:
папка с игрой*\moonloader\SP\profiles
```

```
### Для конвертации SP AHK
Пересохранить профиль по пути:
Documents\GTA San Andreas User Files\SAMP\ScriptPatrol.ini в 
"ScriptPatrol AHK.ini" с кодировкой ANSI(она же Windows1251, CP1251)
```

```
### Для конвертации Binder by Kvas
Профили должны находиться по пути:
документы\GTA San Andreas User Files\SAMP\SnailMatic\profiles
```

```
### Для конвертации Police Assistant
Профиль должен находиться по пути:
папка с игрой\moonloader\Police Assistant\bindlist.json
```

</br>

<!-- ..............................КАСТОМИЗАЦИЯ БИНДЕРА.................................. -->
## 10.9. Кастомизация биндера

- Звук уведомления от биндера можно изменить
  - Первый вариант: нужно закинуть файл со звуковым уведомлением и названием **notification.mp3** в _Documents\GTA San Andreas User Files\SAMP\SnailMatic_.
    - Пример: [notification.zip](https://github.com/GrezeeBal/SnailMaticDocs/files/12101036/notification.zip)
  - Второй вариант: создать текстовый документ **notification.txt** в _Documents\GTA San Andreas User Files\SAMP\SnailMatic_ и вписать в него прямую ссылку с интернета на mp3 файл
    - Пример: [notification.txt](https://github.com/GrezeeBal/SnailMaticDocs/files/12134942/notification.txt)


- Чтобы поменять фон интерфейса биндера нужно закинуть картинку с названием **background.png** в _\Documents\GTA San Andreas User Files\SAMP\SnailMatic_ (рекомендуемый размер 640х654)
  - Пример: https://imgur.com/a/4GxiTYD
 
- Чтобы отключить запросы биндера на хост - создай файл `nointernet.txt` в папке _\Документы\GTA San Andreas User Files\SAMP\SnailMatic_
 
 </br>



<!-- ....................................................................SNAILMATIC API.................................................................... -->
# 11. Информация для разработчиков, SnailMatic API

SnailMatic экспортирует некоторые свои функции, которые вы можете использовать чтобы написать для него плагин или дополнить свой скрипт функционалом. Их полезность заключается в том, что они не используют `SAMPFUNCS` и написаны одновременно под `R1/R3/R4-2/03DL`.

Плагины для SM можно делать в виде отдельных скриптов через папку moonloader, а так же через встроенную систему подгрузки дополнительных переменных (скриптов) через папку _Документы\GTA San Andreas User Files\SAMP\SnailMatic\variables_.

Для скриптов в moonloader функции нужно будет подключить через:

```Lua
local sm = import("snailmatic.lua")
```

Для скриптов через _SnailMatic\variables_ отдельно подключать ничего не нужно, как и использовать переменную `sm.`. [Примеры здесь](https://github.com/GrezeeBal/SnailMaticDocs/blob/main/ADDITIONAL_VARIABLES.md)

В переменной `sm` будут находиться такие функции:

```Lua
sm.getBinderLanguage -- получает язык интерфейса биндера
sm.addNotification('Привет мир!') -- отправляет текст в виде уведомления от биндера (sm_addNotification, если через папку variables)
sm.print('Text') -- выводит текст в консоль биндера. Открыть консоль - Ctrl+~ или /smconsole

sm.updateVariable(name, value) -- обновляет значение переменной
sm.updateVariable('targetid', 1) -- обновит переменную targetid, задав ей новое значение
```

```Lua
result = sm.callVariable(name, param) -- вызвать переменную, возвращается результат обработки.
id = sm.callVariable('targetid') -- получить ид текущей цели, обычная переменная
nick = sm.callVariable('nick', 1) -- получить ник по ид, функциональная переменная
```

```Lua
result = sm.convertString(str) -- обрабатывает строку с переменными
result = sm.convertString("hello, my name is $myname$") -- "hello, my name is Yarik"
```

```Lua
sm.registerVariable(name, description, value) -- зарегистрировать новую обычную переменную
sm.registerFunctionalVariable(name, description, value, render) -- зарегистрировать новую функциональную переменную
```

— параметр `render` может быть строкой, тогда это превратится в подсказку к функциональной переменной (знак вопроса у названия переменной):

```Lua
sm.registerFunctionalVariable('varname', 'vardescription', function(param) end, 
[[@chatwordsl(99;1)@ - первое слово из последнего сообщения
@chatwordsl(98;5)@ - пятое слово из предпоследнего сообщения]])
```

— и может быть функцией, которая рендерит имгуи окно (знак плюса у названия переменной), как пример:

```Lua
sm.registerFunctionalVariable('varname', 'vardescription', function(param) end, 
function()
  imgui.Button("ok")
end)
```

Чтобы изменять язык описания и подсказки переменной в зависимости от языка интерфейса - используй `{ru = 'текст', en = 'text'}`, пример:

```Lua
sm.registerVariable('takescreen', {ru = "Делает скриншот", en = "Takes a screenshot"}, function()
  samp.takeScreenshot()
end)
```

Файлы с переменными можно подключать к другим переменным через `require`. Они будут подтягиваться из _SnailMatic\variables_

```Lua
local var = require("file")
```

<details>
  <summary markdown="span">Пример по регистрации новой функциональной переменной:</summary>
  
```Lua
sm.registerFunctionalVariable('time+min', 'Текущее время + указанное время, MM:SS', function(param)
    local min, sec = param:match('(%d+):(%d+)')
    min, sec = tonumber(min), tonumber(sec)
    return os.date("%H:%M:%S", os.time() + (min*60) + sec)
end)
-- создаёт функ. переменную, которая добавляет к текущему времени время, указанное в параметре переменной в формате MM:SS
```

</details>

<details>
  <summary markdown="span">Аналоги функций SAMPFUNCS</summary>
  
```Lua
sm.samp_getCurrentServerName
sm.samp_getPlayerIdByNickname
sm.samp_setCurrentWeaponHook
sm.samp_addChatMessageHook
sm.samp_getPlayerPing
sm.samp_getCharHandleBySampPlayerId
sm.samp_getPlayerIdByCharHandle
sm.samp_getPlayerScore
sm.samp_sendRPCHook
sm.samp_updatePlayers
sm.samp_getLocalPlayerNick
sm.samp_isDialogActive
sm.samp_addChatMessageEx
sm.samp_sendChat
sm.samp_isChatInputActive
sm.samp_getPlayerColor
sm.samp_getCurrentDialogId
sm.samp_getDialogText
sm.samp_setCurrentDialogListItem
sm.samp_closeCurrentDialogWithButton
sm.samp_getPlayerNickname
sm.samp_getLocalPlayerId
sm.samp_processInput
sm.samp_setChatInputText
sm.samp_setChatInputEnabled
sm.samp_setInputBoxCursor
sm.samp_addChatMessage
sm.samp_setCurrentDialogEditboxText
sm.samp_isPlayerConnected
```

</details>

 </br>



<!-- ....................................................................ОШИБКИ И РЕШЕНИЯ.................................................................... -->
# 12. Известные ошибки и их решения

## 1.

```
Биндер не запускается с помощью CTRL+Z или команды /sm.open
```

`Решение`: Установи все библиотеки по ссылкам выше (см. [Требования](#требования)). Для подробной информации об ошибках - открой текстовый документ _...\moonloader\moonloader.log_ и в строчке `(error) SnailMatic:` - прочитай ошибку.

## 2.

```
Игра при запуске крашится, если установлен SnailMatic
```

`Решение`: Установи с заменой [RakLua](https://www.blast.hk/threads/69433/) 2.1 в папку `…\moonloader\lib`.

`Решение 2`: смени параметр **hookmode** на `0`(это автономный) или `3`(это sampfuncs) в файле _C:/Users/user/Documents/GTA San Andreas User Files/SAMP/SnailMatic/snailmatic.json_

## 3.

```
Отправляется только первая строка в бинде - остальные нет.
```

`Решение`: Это происходит из-за того, что на строках не установлена задержка. Если между строками нет задержки - они отправляются моментально, что превращается во флуд - сервер в свою очередь флуд будет блокировать. Задержка выставляется в миллисекундах (1 сек = 1000 мсек)

## 4.

```
Биндер ведёт себя очень нестабильно, бинды не проигрываются полностью, биндер перезагружается
```

`Решение`: В настройках биндера с помощью ползунка "Режим хукинга" измени режим на любой другой. Описание режимов указаны в подсказке. Самый стабильный режим - **SAMPFUNCS** (наличие SAMPFUNCS обязательно).

## 5.

```
(error)    SnailMatic: Ошибка #1. Перезагрузка
```

`Решение`: В настройках биндера с помощью ползунка "Режим хукинга" измени режим на любой другой. Описание режимов указаны в подсказке. Самый стабильный режим - **SAMPFUNCS** (наличие SAMPFUNCS обязательно).

## 6.

```
(error)    SnailMatic: Ошибка #3. Возможное решение: смена DNS или установка VPN
```

`Решение`: Создай текстовый файл под названием `nointernet.txt` в папке _\Документы\GTA San Andreas User Files\SAMP\SnailMatic_.

## 7.

```
(exception) SnailMatic: CJSON: Expected value but found T_END at character 1
(error) SnailMatic: [string "..."]:0: attempt to index a nil value
stack traceback:
    [string "..."]: in function 'loadSetting'
    [string "..."]: in function <[string "..."]:0>
(error) SnailMatic: Script died due to an error. (33B3215C)
```

`Решение`: Удали **_snailmatic.json_** по пути _C:/Users/user/Documents/GTA San Andreas User Files/SAMP/SnailMatic_

## 8.

```
(error)    SnailMatic: C:\GTA San Andreas\moonloader\lib\mimgui\imgui.lua:8: cannot load module 'C:\GTA San Andreas\moonloader\lib\mimgui\cimguidx9': Не найден указанный модуль.
    stack traceback:
        [C]: in function 'load'
        C:\GTA San Andreas\moonloader\lib\mimgui\imgui.lua:8: in main chunk
        [C]: in function 'require'
        C:\GTA San Andreas\moonloader\lib\mimgui\init.lua:7: in main chunk
        [C]: in function 'require'
        [string "..."]: in function <[string "..."]:0>
        C:\GTA San Andreas\moonloader\snailmatic.luac: in function <C:\GTA San Andreas\moonloader\snailmatic.luac:0>
        C:\GTA San Andreas\moonloader\snailmatic.luac: in function <C:\GTA San Andreas\moonloader\snailmatic.luac:0>
```

`Решение`: Установи https://aka.ms/vs/17/release/vc_redist.x86.exe

## 9.

```
Белые квадраты вместо шрифта
```

![image](https://user-images.githubusercontent.com/71496296/152438177-18c92fc2-548f-419f-bd77-4d29d0dcb906.png)

`Решение`: Создай текстовый документ **_512_2048.txt_** или **_512_1024.txt_** в папке _\Документы\GTA San Andreas User Files\SAMP\SnailMatic_. С этим фиксом не будут работать иконки в редакторе HUD и шпаргалке
