# Гайд по созданию биндов в SnailMatic

> Рекомендую читать примеры ниже с самого начала статьи.

## Содержание

1. Автоматическая отыгровка
2. Сокращение команд (быстрый репорт)
3. Сокращение команд (более быстрый автоматический репорт)
4. Сокращение фраз
5. Быстрая очистка чата
6. Условия активации бинда
7. Пауза, остановка запущенных биндов
8. Автоактивация бинда по тексту в чате (автоответ на СМС)
9. Создание функциональных диалоговых окон
10. Флудер
11. Генератор случайных отыгровок (случайные отыгровки ареста)
12. Создаём арифметическую прогрессию

</br>

**Для начала создания бинда нам нужна идея: что должен сделать для нас биндер?** — SnailMatic способен выполнить любую поставленную для него задачу, будь-то автоматические отыгровки, сокращения фраз, математические операции и даже алгоритмы.

Главное не стесняться экспериментировать.

</br>

<!-- .........................АВТОМАТИЧЕСКАЯ ОТЫГРОВКА......................... -->
# 1. Автоматическая отыгровка

Я состою во фракции мед. персонала и мне нужна автоматическая отыгровка всех моих действий, допустим у нас есть уже заготовка отыгровки, которую подготовил нам лидер фракции:

```
Здравствуйте, я ваш лечащий врач Имя Фамилия
/me осмотрел пациента и поставил диагноз
/do Медицинская сумка на плече.
/me достал из медицинской сумки лекарство и бутылку воды
/me передал бутылку воды и лекарство пациенту
Держите, это обезболивающие, сейчас Вам станет легче.
Удачного дня, не болейте!
/heal [ID]
```

Откроем окно биндера с помощью команды `/smopen` или с помощью сочетания клавиш `CTLR+Z`, а далее добавим один бинд:

![image](https://user-images.githubusercontent.com/71496296/152537632-fffd4c8d-1559-4d52-8755-9f4ac9dc3ac9.png)

У нас появился бинд с названием «**Без имени**» — откроем его, два раза кликнув по нему `ЛКМ`:

![image](https://user-images.githubusercontent.com/71496296/152537651-c21277ea-ff1a-4779-8467-786169959997.png)

Итак, у нас открылся **Редактор биндов**, теперь нам нужно вставить нашу вышеупомянутую заготовленную отыгровку. Скопируем же всю эту отыгровку с помощью CTRL+C!

Далее возвращаемся в игру, где у нас уже открыт редактор. Сразу же возникает проблема: как и куда нужно вставлять этот весь огромный текст? — В поле «**Сообщение**».

![image](https://user-images.githubusercontent.com/71496296/152537678-4abe9eb1-0ec2-4dad-8405-6a36f1a4e91a.png)

**Но!** Это поле какое-то маленькое и длинное — почему? Потому что это всего лишь одна строка, которую отправит биндер. Нам нужно вставить большой текст, поэтому мы просто поменяем вид этой строки, превратив её в «блокнот»:

![image](https://user-images.githubusercontent.com/71496296/152537718-2926b803-29b8-4dd6-b960-fa3e8a7fcaa4.png)

Теперь наш редактор выглядит как-то так:

![image](https://user-images.githubusercontent.com/71496296/152537755-38a2827e-2337-4961-90ac-04ded76c25e4.png)

В это большое поле мы и вставляем заранее скопированный текст отыгровки:

![image](https://user-images.githubusercontent.com/71496296/152537785-6a9fa687-8f44-4bde-86d4-f4976c226d4e.png)

Готово! Полдела сделано! Что дальше? — Настроим задержку между отправками этих строк и немного автоматизируем этот бинд, добавив в него переменную, которая будет автоматически подставлять ID игрока, которого нужно вылечить. Для удобства мы поменяем вид редактора на построчное отображение:

![image](https://user-images.githubusercontent.com/71496296/152537813-e819169d-0e3d-4284-8927-ee3bd7820ee2.png)

![image](https://user-images.githubusercontent.com/71496296/152537818-7486e59d-2f01-4607-bca5-fab5fdb08383.png)

Как удобно, не правда ли? Теперь перейдем к редактированию задержек, ведь без них каждое сообщение будет отправляться моментально и сразу же после другого сообщения — это превратится во **флуд** и сервер будет **блокировать** эти отыгровки. Как избежать? — Выставить задержку у каждой строки.

![image](https://user-images.githubusercontent.com/71496296/152537832-64a3c59b-d2e4-487b-b018-9c96e6c87003.png)

Задержка в биндере SnailMatic выставляется в **миллисекундах** (мсек). 1 секунда = 1000 мсек. Для большинства серверов подойдет задержка в 2 секунды, то есть 2000 мсек. Поэтому для каждого сообщения делаем задержку в 2000 мсек.

![image](https://user-images.githubusercontent.com/71496296/152537882-07551fa8-8793-4629-89d3-d1add49339cf.png)

Обрати внимание, что на последней строке мы не выставили задержку, почему? — Задержка означает задержку перед отправкой следующего сообщения, то есть выставляя задержку на первом сообщении мы указываем биндеру, сколько ему нужно подождать перед отправкой второго сообщения

![image](https://user-images.githubusercontent.com/71496296/152538011-f212646b-77d5-4022-a25e-1866f16c7ecb.png)

Так как после последнего сообщения у нас не идет какая-либо строка — то и задержка там не нужна.

Осталось дело за малым — добавить автоматизированную вставку нашего имени и фамилии, а так же айди игрока, которого нужно вылечить.

Мы изменим текст 

```
Здравствуйте, я ваш лечащий врач Имя Фамилия 
```

на 

```
Здравствуйте, я ваш лечащий врач $myname$ $mysurname$
```

![image](https://user-images.githubusercontent.com/71496296/152538084-e93e8c2c-9105-481a-a42c-1019c9985186.png)

Это даст указания биндеру, что он должен вписать на месте переменных `$myname$` `$mysurname$` наше имя и фамилию.

Дальше сделаем автоматический ввод ID игрока, которого нужно вылечить. Как биндер должен понять и узнать этого игрока? — На самом деле никак, но мы можем ему в этом помочь. Самый простой способ — это приблизиться к этому игроку, чтобы он стал самым ближайшим для тебя. В случае такого развития событий мы будем использовать переменную `$closestid$` — эта переменная впишет Айди самого ближайшего к тебе игрока. Куда её вставлять? — После команды `/heal`:

![image](https://user-images.githubusercontent.com/71496296/152538132-280f3bb4-d60b-4a94-a8ce-58bc245a9e08.png)

Далее нам нужно установить активацию для этого бинда и сделать для него название. Назовем этот бинд «**Лечение**»

![image](https://user-images.githubusercontent.com/71496296/152538147-e21953f5-51b3-4aa6-a540-e80003fc35e2.png)

А так же установим на него сочетание клавиш, чтобы его активировать в нужный нам момент:

![image](https://user-images.githubusercontent.com/71496296/152538168-17ae38dc-da92-4f5a-9643-b7852e089df1.png)

Всё, готово! Нам остается только лишь нажать на `Alt+1`, как биндер автоматически отыграет все наши отыгровки, сам впишет наше имя и фамилию, а так же вставит в команду /heal айди нужного игрока.

</br>

<!-- .........................БЫСТРЫЙ РЕПОРТ......................... -->
# 2. Быстрый репорт с помощью сокращенной команды.

Предположим, что у нас на сервере репорт используется с помощью команды `/report` `[текст репорта]`.

Мы будем писать в чат: `rep 192 айди чит` — а биндер это будет заменять на: `/report 192 айди чит`

Создаем еще один бинд, открываем его и в поле сообщение вписываем команду репорта `/report`:

![image](https://user-images.githubusercontent.com/71496296/152538452-15c19603-32a1-4b5c-b120-ce461734f9f5.png)

Далее ставим на него активацию с помощью команды `rep`

![image](https://user-images.githubusercontent.com/71496296/152538465-2a3b3e0a-91cd-4ef0-bc63-b09e9e1f68d2.png)

И допишем к команде `/report` функциональную переменную [@paramcmd(1+)@](https://vk.com/@scriptpatrol-gaid-po-funkcionalnym-peremennym-v-snailmatic?anchor=paramcmd), которая будет вставлять написанный нами текст репорта:

![image](https://user-images.githubusercontent.com/71496296/152538551-5d043721-a823-44ae-ba89-1a218647bc81.png)

Готово! Теперь вместо того, что бы писать полностью команду `/report [текст репорта]` мы можем просто прописать `rep [текст репорта]`, не используя слэш.

</br>

<!-- .........................БЫСТРЫЙ РЕПОРТ 2......................... -->
# 3. Улучшаем наш быстрый репорт.

Вместо `/report 192` чит мы будем писать `чит 192`

В новом бинде ставим активацию по команде: `чит`

![image](https://user-images.githubusercontent.com/71496296/152538947-553f74ac-0a83-492e-b229-00ee2a5f2a62.png)

А в сообщение вставляем: `/report @paramcmd(1+)@ чит`

![image](https://user-images.githubusercontent.com/71496296/152539023-09654a77-b408-4f5f-9730-577e93c48e52.png)

Теперь при написании `чит 192` биндер заменит это на `/report 192 чит`

</br>

<!-- .........................СОКРАЩАЕМ ФРАЗУ......................... -->
# 4. Сокращаем фразу.

Видишь знакомого игрока и хочешь быстро с ним поздороваться? «Ку» — как-то скучно и устарело, а вот: «Категорически приветствую» — стильно и молодёжно.

Регистрируем команду активации `ку` на новый бинд:

![image](https://user-images.githubusercontent.com/71496296/152539318-14670202-2df6-41d2-b73e-bb59fd3e3976.png)

Вписываем в Сообщение нашу фразу приветствия `Категорически приветствую.`:

![image](https://user-images.githubusercontent.com/71496296/152539348-4897ae79-bee3-4d77-90e4-041a9d9764e4.png)

*Результат*

![inside](https://user-images.githubusercontent.com/71496296/152436682-afad5472-187c-4958-8240-2724536d82ee.gif)

</br>

<!-- .........................БЫСТРО ОЧИЩАЕМ ЧАТ......................... -->
# 5. Быстро очищаем чат.

Бывают моменты, когда нам нужно очистить чат. В биндере для этого есть переменная `$chatclear$`. Но писать её вручную долго, к тому же при отправке этой переменной в чат она возвратит пустую строку, так как она не содержит текст, и получится что-то типо такого:

![chatclear](https://user-images.githubusercontent.com/71496296/152539703-a1b15b33-faee-4d9a-b3ec-172f93bdbec8.gif)

Чтобы избежать отправки пустой строки и ускорить нашу очистку чата сделаем бинд и зарегистрируем на него команду активации `сс`

![image](https://user-images.githubusercontent.com/71496296/152539863-2f81bbc2-3342-47f1-9568-ac153770278e.png)

В Сообщение впишем эту переменную `$chatclear$`

![image](https://user-images.githubusercontent.com/71496296/152539880-fb9f61df-3bd0-4ece-8964-a74e11c9b0d7.png)

А так же поставим на эту строку отправку «**Без отправки**», что даст указание биндеру не отправлять её никуда. Переменная в свою же очередь выполнится в любом случае и при любой отправке. Описание каждой отправки можно найти [по этой ссылке](https://github.com/GrezeeBal/SnailMaticDocs/blob/main/README.md#%D0%BC%D0%B5%D1%82%D0%BE%D0%B4%D1%8B-%D0%BE%D1%82%D0%BF%D1%80%D0%B0%D0%B2%D0%BA%D0%B8-%D1%81%D1%82%D1%80%D0%BE%D0%BA%D0%B8)

![image](https://user-images.githubusercontent.com/71496296/152540062-1a7d0252-2154-4ec4-b988-e1b06a5a4692.png)

Теперь просто впишем в чат команду `сс` и чат полностью очистится без всяких проблем

![chatclear_2](https://user-images.githubusercontent.com/71496296/152540168-72c4696f-529f-4907-bbca-467d060ba734.gif)

Чтобы писать эту команду на двух языках (русском и английском) — продублируем этот бинд:

![chatclear_3](https://user-images.githubusercontent.com/71496296/152540245-fef92e80-9039-4736-a2d8-737f6e465d32.gif)

И во втором бинде просто изменим раскладку команды `сс`

</br>

<!-- .........................МЕГАФОН ДЛЯ МЕНТОВ......................... -->
# 6. Делаем бинд с мегафоном для полиции, который может активироваться только в машине.

У меня есть бинд на мегафон. Он активируется по клавише `R`:

![image](https://user-images.githubusercontent.com/71496296/152540429-b3b1c65a-6049-48ce-86c6-8b5020b41515.png)

Возможно возникнут проблемы, если я случайно нажму на эту клавишу пешком или во время набора текста: как избежать ненужных активаций этого бинда? — С помощью Условий активации бинда

![image](https://user-images.githubusercontent.com/71496296/152540449-b0848c8e-64cc-4b3d-93f4-86d925249b41.png)

С этой вкладки я дам указания биндеру, когда этот бинд сможет активироваться, а когда нет:

![image](https://user-images.githubusercontent.com/71496296/152540462-7cfc630e-800b-4542-9375-4ed098fcba53.png)

— бинд не запустится если:

```
Открыт диалог
Открыт чат
Я не в машине
```

Теперь я смогу спокойно активировать свой бинд по нажатию клавиши `R`, не переживая, что он сможет случайно запуститься в неподходящий момент.

</br>

<!-- .........................СТАВИМ БИНДЫ НА ПАУЗУ......................... -->
# 7. Ставим запущенные бинды на паузу.

У меня есть огромный бинд с лекцией на тему Бронхита для своих интернов.

![image](https://user-images.githubusercontent.com/71496296/152540581-68914589-fb3e-4a1b-91d9-8dbe8bc6f546.png)

Во время чтения этой лекции мне иногда нужно отвечать на вопросы своих медиков. Но бинд с лекцией уже запущен, он идёт без остановки и я не могу просто выключить этот бинд, чтобы ответить на один вопрос — что же делать?

**Поставить запущенный бинд с лекцией на паузу** и спокойно ответить на вопрос интерна, после чего возобновить его работу с того места, где он встал на паузу.

Во время работы этого бинда я могу нажать на клавишу активации этого бинда — это поставит бинд на паузу. Во время этой паузы я могу отвести любое количество времени на вопросы со стороны интернов, а после чего еще раз нажать на клавишу активации этого бинда и он возобновится с того места, где был поставлен на паузу.

![image](https://user-images.githubusercontent.com/71496296/152540618-5c8e601f-a28d-4500-94fd-ad6df0b13bf7.png)

Так же я могу просто открыть главное окно биндера, и с помощью соответствующей иконки поставить бинд на паузу, а затем по нажатию на эту же иконку снять его с паузы.

*Поставить на паузу*

![image](https://user-images.githubusercontent.com/71496296/152540653-fc6244c8-6b94-4354-b14b-2094151de0ae.png)

*Снять с паузы*

![image](https://user-images.githubusercontent.com/71496296/152540695-07e5451f-bdf0-4d81-8c3e-9fbd526580b6.png)

*Остановить бинд*

![image](https://user-images.githubusercontent.com/71496296/152540724-5e5cefc0-c1ca-41b2-af33-3e68789836b3.png)

</br>

<!-- .........................АВТОМАТИЧЕСКИ ОТВЕЧАЕМ НА СМС......................... -->
# 8. Автоматически отвечаем на СМС.

К примеру на нашем сервере входящее СМС выглядит так:

```
SMS: Здарова жопошник | Отправитель: Yarik_Vodila [т.942999]
```

Мне нужно на него очень быстро ответить, например, нажать всего-лишь одну клавишу. Звучит выполнимо — приступим.

В данном случае мы будем использовать активацию бинда по появлению текста в чате, в нашем случае при появлении СМС. Для этого используем регулярное выражение, которое позволит нам не только активировать бинд по появлению СМС, но и написать наше собственное ответное СМС человеку с указанным в строке телефоном.

Регулярное выражение для этого сообщения будет выглядеть так:

```
SMS:.+Отправитель: .+_.+ %[т%.(%d+)%]
```

Мы впишем его в активацию по тексту в чате:

![image](https://user-images.githubusercontent.com/71496296/152540894-64311086-8b9f-4c82-8d60-cfa349d84d86.png)

Чтобы это регулярное выражение заработало, нам нужно включить [Lua Pattern.](https://www.blast.hk/threads/62661/) (по гиперссылке ты можешь ознакомиться с понятием «Регулярные выражения» на языке луа и самому научиться составлять такие выражения)

![image](https://user-images.githubusercontent.com/71496296/152541009-cfeb176a-c41b-447e-a4bf-1aab82b80d9b.png)

На данном этапе наш бинд теперь будет активироваться при появлении СМС в нашем чате, сейчас нам нужно сделать «автоматический ответ».

Впишем в Сообщение команду отправки СМС `/sms` и допишем к ней функциональную переменную [@chatwordsex(1)@](https://vk.com/@scriptpatrol-gaid-po-funkcionalnym-peremennym-v-snailmatic?anchor=chatwordsex), которая автоматически будет подставлять телефон.

```
/sms @chatwordsex(1)@ 
```

![image](https://user-images.githubusercontent.com/71496296/152541107-1afd22ba-fb0a-4f7c-b626-62a5fdfa4b79.png)


Сейчас при появлении СМС будет активироваться наш бинд и отправляться на сервер сообщение `/sms [номер телефона]`, но нам нужно вписать ответное сообщение на входящее СМС — для этого изменим отправку строки с командой /sms на «**Написать в чат**»

![image](https://user-images.githubusercontent.com/71496296/152541140-c64ca7c7-b84e-4827-9390-90d107393bf2.png)

Это даст указание биндеру при активации бинда открыть чат и вписать туда заготовку команды `/sms` с автоматически подставленным номером телефона.

![image](https://user-images.githubusercontent.com/71496296/152541183-bb065823-7f40-4603-be5f-fb9dad8ed233.png)

Небольшая проблема: курсор ввода стоит вплотную к номеру телефона — нам что, нужно самому нажимать пробел, чтобы вписать текст? — Нет, просто добавим этот пробел в строку в бинде

![image](https://user-images.githubusercontent.com/71496296/152541203-54a8785b-4e1f-4259-8fdf-c0cd5a080a56.png)

При появлении СМС в чате: `SMS: Текст | Отправитель: Nick_Name [т.number]` будет автоматически открываться чат с заготовленной командой /sms и номером телефона — это не удобно и будет часто мешать. Как решить? — Укажем биндеру, чтобы он спрашивал у нас, активировать этот бинд или нет. Для этого есть галочка в окне редактора биндов «**Требовать подтверждение активации**»

![image](https://user-images.githubusercontent.com/71496296/152541227-38d3b344-02e9-4bc3-b3c0-843063b56ba8.png)

Так же назовём этот бинд «Автоответчик СМС».

![image](https://user-images.githubusercontent.com/71496296/152541236-2341c885-0980-43a9-86b8-f37f3a730e94.png)

Вот теперь наш бинд на автоматический ответ на СМС полностью готов и при появлении СМС у нас будет всплывать такое уведомление от биндера:

![image](https://user-images.githubusercontent.com/71496296/152541260-f925671b-942b-4634-8d72-cd6e388eccaa.png)

Нажимая и подтверждая бинд с помощью клавиши `1` у нас автоматически откроется чат с заготовленной командой и номером телефона, куда нам остается лишь вписать ответное сообщение.
